(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1032:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page-part-details"},[a("header",{staticClass:"part-details__header"},[a("navigation-part-details",{on:{back:e.handleBack}})],1),e._v(" "),a("main",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"part-details__main"},[e.imgNameList.length>1?a("div",{staticClass:"menu"},[e.showThumb?a("div",{staticClass:"count"},[e._v("共 "+e._s(e.imgNameList.length)+" 张")]):a("button",{staticClass:"btn-back-to-thumb",attrs:{disabled:e.loadingImage},on:{click:e.hanleBackToThumbs}},[[e._v("查看缩略图")]],2)]):e._e(),e._v(" "),a("div",{staticClass:"part-details__main__wrap",class:{"has-padding-top":1===e.imgNameList.length}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.pageLoading&&(e.loadingImage||e.loadingThumbs),expression:"!pageLoading && (loadingImage || loadingThumbs)"}],staticClass:"part-details__img"},[e.showThumb?a("div",{staticClass:"thumbs"},[a("div",{staticClass:"thumbs__wrap"},[e.thumbList.length?e._l(e.thumbList,(function(t,i){return a("div",{key:i,staticClass:"thumbs__item",class:{"is-selected":i===e.selectedThumb},on:{click:function(t){return e.handleSelectThumb(i)}}},[a("img",{attrs:{src:t.imgUrl}}),e._v(" "),i===e.selectedThumb?a("div",{staticClass:"zoom"},[a("span",[e._v("点击放大")])]):e._e()])})):a("span",[e._v(e._s(e.toastMessage))])],2)]):e._e(),e._v(" "),e.loaded&&!e.showThumb?a("image-viewer",{attrs:{src:e.imgSrc,parts:e.parts,"selected-item":e.selectedPart,"hovered-item":e.hoverPart,"show-fullscreen":!0,message:e.toastMessage},on:{select:e.handleSelectImage,load:e.handleImageLoad,"full-screen":function(t){e.showDialog=!0}}}):e._e()],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.pageLoading&&e.loadingMoreParts,expression:"!pageLoading && loadingMoreParts"}],staticClass:"part-details__parts"},[a("el-table",{ref:"morePartsTable",class:{"is-grabbing":e.mouseDown},staticStyle:{width:"100%"},attrs:{data:e.parts,"row-class-name":e.tableRowClassName,border:"",height:"100%"},on:{"row-click":e.handleRowClick,"cell-mouse-enter":e.handleMouseEnter,"cell-mouse-leave":e.handleMouseLeave}},[a("el-table-column",{attrs:{prop:"total",label:" ",width:"40",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"table_add",attrs:{id:t.$index},on:{click:function(a){return e.addPartsList(t.row,t.$index)}}})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"partRefOnImage",label:"图中编号",width:"99"},scopedSlots:e._u([{key:"default",fn:function(t){return[[e._v(e._s(t.row.partRefOnImage))],e._v(" "),t.row.hasParent?[a("el-tooltip",{attrs:{content:"局部配件",effect:"dark",placement:"top",transition:"tooltip-fade-in-linear"}},[a("div",{staticClass:"icon-partial"})])]:e._e(),e._v(" "),a("el-tooltip",{attrs:{content:"查询结果",effect:"dark",placement:"top",transition:"tooltip-fade-in-linear"}},[t.row.isMarked?a("div",{staticClass:"icon-current-part"}):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stdPartName",label:"标准名",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"srcPartName",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"is-gray"},[e._v(e._s(t.row.srcPartName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"partPrice",label:"4S店价格",width:"99"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partNumber",label:"现用 OE 号",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"oe"},[[e._v(e._s(t.row.partNumber))],e._v(" "),e.showCopy(t.row.partNumber)?a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.partNumber,expression:"scope.row.partNumber",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"btn-copy"},[[e._v("复制")]],2):e._e()],2)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"substitute",label:"曾用 OE 号",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"substitute"},[a("span",{staticClass:"is-gray"},[e._v(e._s(t.row.substitute))]),e._v(" "),e.showCopy(t.row.substitute)?a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.substitute,expression:"scope.row.substitute",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"btn-copy"},[[e._v("复制")]],2):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"备注",width:"245"}})],1)],1)]),e._v(" "),e.showDialog?a("dialog-part-details",{attrs:{"image-src":e.image||e.imgList[e.selectedThumb],data:e.parts},on:{close:function(t){e.showDialog=!1}}}):e._e()],1)])};i._withStripped=!0;a(82),a(211),a(100),a(67),a(101),a(102),a(103),a(68);var s=a(80),r=a(21),n=a.n(r),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("div",{staticClass:"btn-back",on:{click:e.handleGoBack}},[a("span",{staticClass:"btn-back-text"},[e._v(e._s(e.btnGoBackText))])]),e._v(" "),a("span",{staticClass:"title"},[e._v(e._s(e.navTitle))]),e._v(" "),a("div",{staticClass:"part_list",on:{click:e.goPartsList}},[a("i",{staticClass:"icon_list"}),e._v(" "),a("span",[e._v("配件清单")]),e._v(" "),a("span",{staticClass:"list_total"},[e._v(e._s(e.partsListTotal))])])])};function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o._withStripped=!0;var u={data:function(){return{btnGoBackText:"< 返回"}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(s.e)("partDetails",["navTitle"]),{},Object(s.e)("partsList",["partsListTotal"])),methods:{handleGoBack:function(){this.$emit("back")},goPartsList:function(){open("#/parts-list")}}},h=(a(978),a(649)),m=Object(h.a)(u,o,[],!1,null,"97695704",null);m.options.__file="app/components/NavigationPartDetails.vue";var d=m.exports,p=a(794),g=a(849),f=a(734),v=a(665),b=a(0),_=(a(24),a(31),a(55),a(6));function w(e,t,a,i,s,r,n){try{var o=e[r](n),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(i,s)}function P(e){return function(){var t=this,a=arguments;return new Promise((function(i,s){var r=e.apply(t,a);function n(e){w(r,i,s,n,o,"next",e)}function o(e){w(r,i,s,n,o,"throw",e)}n(void 0)}))}}var y,C,L={getPartThumb:(C=P(regeneratorRuntime.mark((function e(t,a){var i,s,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.imageNames,s=t.imagePrePath,r=t.source,n=a.cancelToken,e.next=4,_.a.post("/service/common/part/reqPartImage/m3",{imageNames:i,imagePrePath:s,source:r},{cancelToken:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)}),getPartListByVehicleImg:(y=P(regeneratorRuntime.mark((function e(t,a){var i,s,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.vehicle,s=t.imageName,r=t.pageIndex,n=t.pageLimit,o=a.cancelToken,e.next=4,_.a.post("/service/common/part/queryListByVehicleImg/m2",{vehicle:i,imageName:s,pageIndex:r,pageLimit:n},{cancelToken:o});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)})};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N={components:{NavigationPartDetails:d,ImageViewer:p.a,DialogPartDetails:g.a},mixins:[f.a,v.a],data:function(){return{showDialog:!1,showThumb:!0,thumbList:[],imgList:null,selectedThumb:0,pageLoading:!0,loadingThumbs:!1}},computed:T({},Object(s.e)("partDetails",["prefix","imgNameList","vehicle","oe","ref"]),{},Object(s.c)("partDetails",["fromPartTree","fromOE"]),{},Object(s.c)("partTree",["currentVehicle","firstLevelId","secondLevelId"]),{imgSrc:function(){return this.image||this.imgList?this.image||this.imgList[this.selectedThumb]:""}}),watch:{loaded:function(e){e&&(this.pageLoading=!1,this.scrollToCurrentPart())}},created:function(){this.fromPartTree||this.fromOE||!this.imgNameList?(this.showThumb=this.imgNameList.length>1,1===this.imgNameList.length?this.getPartImage({prefix:this.prefix,imageName:this.imgNameList[0],firstLevelId:this.firstLevelId,secondLevelId:this.secondLevelId,source:this.fromOE?"0":null}):(this.imgList=Array(this.imgNameList.length).fill(""),this.getPartThumb({imageNames:this.imgNameList,imagePrePath:this.prefix,source:"0"})),this.fromPartTree?this.queryPartsByImage({vinCode:this.currentVehicle.vinCode,optionCode:this.currentVehicle.optionCode,mjsid:this.currentVehicle.mjsid,vehicle:this.currentVehicle,image:this.imgNameList[0],source:"2"}):this.fromOE&&this.queryPartsByImage({vinCode:this.currentVehicle.vinCode,optionCode:this.currentVehicle.optionCode,mjsid:this.currentVehicle.mjsid,vehicle:this.vehicle,image:this.imgNameList[this.selectedThumb],source:"0"})):this.$router.push({name:b.f.HOME})},methods:T({},Object(s.b)("partsList",["addPart"]),{handleBack:function(){this.fromPartTree?this.$router.push({name:b.f.PART_TREE}):this.fromOE&&this.$router.push({name:b.f.VEHICLE_GROUP})},hanleBackToThumbs:function(){this.showThumb=!0},handleSelectThumb:function(e){if(!this.loadingMoreParts){if(this.selectedThumb===e)return this.handleZoom(e);this.selectedThumb=e,this.parts=[],this.queryPartsByImage({vinCode:this.currentVehicle.vinCode,optionCode:this.currentVehicle.optionCode,mjsid:this.currentVehicle.mjsid,vehicle:this.vehicle,image:this.imgNameList[e],source:"2"})}},handleZoom:function(e){this.showThumb=!1,this.imgList[e]||this.getPartImage({prefix:this.prefix,imageName:this.imgNameList[e],firstLevelId:this.firstLevelId,secondLevelId:this.secondLevelId,source:this.fromOE?"0":null})},getPartThumb:function(e){var t=this,a=e.imageNames,i=e.imagePrePath,s=e.source,r=n.a.CancelToken.source();this.cancelToken.push(r),this.loadingThumbs=!0,this.loadingImage=!0,L.getPartThumb({imageNames:a,imagePrePath:i,source:s},{cancelToken:r.token}).then((function(e){if(e){var a=e.data,i=a.code,s=a.toastMessage,r=a.data;i===b.e.SUCCESS?t.thumbList=r||[]:t.toastMessage=s,t.loadingThumbs=!1,t.loadingImage=!1}})).catch((function(e){console.error(e)}))},getPartListByVehicleImg:function(e){var t=this,a=e.vehicle,i=e.imageName,s=n.a.CancelToken.source();this.cancelToken.push(s),this.loadingMoreParts=!0,this.parts=[],L.getPartListByVehicleImg({vehicle:a,imageName:i,pageIndex:1,pageLimit:200},{cancelToken:s.token}).then((function(e){if(e){var a=e.data.data||[];t.handleGetPartListResp(a,[]),t.loadingMoreParts=!1}})).catch((function(e){console.error(e)}))},addMark:function(e){var t=this,a=!1;this.oe&&e.forEach((function(e){e.partNumber===t.oe&&(e.isMarked=a=!0)})),a||(this.oe&&e.forEach((function(e){e.substitute===t.oe&&(e.isMarked=a=!0)})),a||this.ref&&e.forEach((function(e){e.partRefOnImage===t.ref&&(e.isMarked=a=!0)})))},addPartsList:function(e,t){var a={vehicle:"{}"!==JSON.stringify(this.currentVehicle)?this.currentVehicle:this.vehicle,part:e,index:t};document.getElementById(t).classList.length,this.addPart(a)}})},j=(a(979),Object(h.a)(N,i,[],!1,null,"046a7773",null));j.options.__file="app/views/PagePartDetails.vue";t.default=j.exports},649:function(e,t,a){"use strict";function i(e,t,a,i,s,r,n,o){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},l._ssrRegister=c):s&&(c=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}a.d(t,"a",(function(){return i}))},745:function(e,t,a){},746:function(e,t,a){},978:function(e,t,a){"use strict";var i=a(745);a.n(i).a},979:function(e,t,a){"use strict";var i=a(746);a.n(i).a}}]);